---
import Title from '@components/Title.astro'
import portfolio from '../data/portfolio'
import 'atropos/css'
import { Image } from 'astro:assets'
const { projects } = portfolio
---

<section
  id='projects'
  class='mt-20 px-5 md:px-0'
>
  <Title class='text-center mb-10'>Projects</Title>

  <div class='grid grid-cols-1 sm:grid-cols-2 gap-x-3 gap-y-5'>
    {
      projects.map(({ name, image_url }) => {
        return (
          <div class='atropos project-atropos'>
            <div class='atropos-scale'>
              <div class='atropos-rotate'>
                <div class='atropos-inner'>
                  <article
                    class='bg-slate-800 rounded'
                    data-atropos-offset='-2'
                  >
                    <Image
                      data-atropos-offset='-1.5'
                      class='rounded-t'
                      src={image_url}
                      alt={name}
                      width='800'
                      height='460'
                      loading='lazy'
                    />
                    <footer class='p-2'>
                      <h2 data-atropos-offset='3'>{name}</h2>
                    </footer>
                  </article>
                </div>
              </div>
            </div>
          </div>
        )
      })
    }
  </div>
</section>
<script>
  import Atropos from 'atropos'
  const atropos = document.querySelectorAll('.project-atropos')
  atropos.forEach((element) => {
    const $el = element as HTMLElement
    Atropos({
      el: $el,
      shadow: false,
      rotateXMax: 5,
      rotateYMax: 3,
      rotateXInvert: true,
      rotateYInvert: true,
      highlight: false
    })
  })
</script>
